name: GitHub Actions Demo
run-name: Run unit tests
on:
  push:
    branches-ignore:
      - 'main'
jobs:
  Unit-Test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: unit test
        uses: oven-sh/setup-bun@v1
      - run: bun install
      - run: bun run spec

      - run: wget https://go.dev/dl/go1.21.1.linux-amd64.tar.gz
      - run: sudo rm -rf /usr/local/go && tar -C /usr/local -xzf go1.21.1.linux-amd64.tar.gz
      - run: export PATH=$PATH:/usr/local/go/bin
      - run: go version

      - run: git clone https://github.com/hashicorp/terraform.git
      - run: cd terraform
      - run: go install
      - run: echo $PATH
      - run: sudo mv ~/Downloads/terraform /usr/local/bin/

      - run: bun run deploy
